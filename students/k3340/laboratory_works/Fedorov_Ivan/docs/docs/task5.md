## –¶–µ–ª—å

–ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π –≤–µ–±‚Äë—Å–µ—Ä–≤–µ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ **GET** –∏ **POST** HTTP‚Äë–∑–∞–ø—Ä–æ—Å–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ **socket**.  
–°–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω —É–º–µ—Ç—å —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –æ—Ü–µ–Ω–∫–∏ –ø–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞–º:

- —á–µ—Ä–µ–∑ POST‚Äë–∑–∞–ø—Ä–æ—Å –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ –∏ –æ—Ü–µ–Ω–∫–∞;
- —á–µ—Ä–µ–∑ GET‚Äë–∑–∞–ø—Ä–æ—Å –æ—Ç–¥–∞—é—Ç—Å—è –≤—Å–µ –æ—Ü–µ–Ω–∫–∏ –≤ –≤–∏–¥–µ HTML‚Äë—Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–ª–∏ JSON.

## –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

–°–µ—Ä–≤–µ—Ä —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ –±–∞–∑–µ TCP-—Å–æ–∫–µ—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ RESTful API.
–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞
–û–±—Ä–∞–±–æ—Ç–∫–∞ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤

    –ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤: –ê–Ω–∞–ª–∏–∑ –º–µ—Ç–æ–¥–∞ (GET/POST), –ø—É—Ç–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–ø—Ä–æ—Å–∞

    –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–µ—Ç–æ–¥–æ–≤: GET –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, POST –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –æ—Ü–µ–Ω–æ–∫

    –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: –û–±—Ä–∞–±–æ—Ç–∫–∞ query-—Å—Ç—Ä–æ–∫–∏ –¥–ª—è GET –∏ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è POST

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ –æ—Ü–µ–Ω–æ–∫**

    –•—Ä–∞–Ω–µ–Ω–∏–µ: –°–ª–æ–≤–∞—Ä—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ü–µ–Ω–æ–∫ –ø–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞–º

    –í–∞–ª–∏–¥–∞—Ü–∏—è: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –≤–≤–æ–¥–∏–º—ã—Ö –æ—Ü–µ–Ω–æ–∫ (—Ü–µ–ª—ã–µ —á–∏—Å–ª–∞ –æ—Ç 1 –¥–æ 5)

    –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ HTML-—Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è XSS-–∞—Ç–∞–∫

**–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è endpoints**

    GET / - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

    POST /add - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –æ—Ü–µ–Ω–∫–∏

    GET /api/grades - JSON API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –æ—Ü–µ–Ω–æ–∫

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞**

    –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π HTML: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

    –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –†–∞—Å—á–µ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ –±–∞–ª–ª–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ—Ü–µ–Ω–æ–∫ –ø–æ –∫–∞–∂–¥–æ–π –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–µ

    –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è: –¢–∞–±–ª–∏—á–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å CSS-—Å—Ç–∏–ª–∏–∑–∞—Ü–∏–µ–π

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**

    –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞

    –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞

    –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –æ—Ü–µ–Ω–æ–∫

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**

    –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å CSS-—Å—Ç–∏–ª–∏–∑–∞—Ü–∏–µ–π

    –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–∞—è —Ñ–æ—Ä–º–∞ –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö

    –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏—è—Ö

    –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ requests, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:

    –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –æ—Å–Ω–æ–≤–Ω—ã—Ö endpoints

    –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ—Ü–µ–Ω–æ–∫

    –†–∞–±–æ—Ç—É JSON API

    –û–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

# –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

    –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞: –°–æ–∑–¥–∞–Ω–∏–µ TCP-—Å–æ–∫–µ—Ç–∞ –∏ –ø–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–µ–∂–∏–º –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è

    –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π: –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫

    –ê–Ω–∞–ª–∏–∑ –∑–∞–ø—Ä–æ—Å–∞: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞, –ø—É—Ç–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ HTTP-–∑–∞–ø—Ä–æ—Å–∞

    –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è: –í—ã–±–æ—Ä —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—É—Ç–∏

    –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö: –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ü–µ–Ω–æ–∫ (–¥–ª—è POST-–∑–∞–ø—Ä–æ—Å–æ–≤)

    –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP-–æ—Ç–≤–µ—Ç–∞ —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –∏ —Ç–µ–ª–æ–º

    –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞: –í–æ–∑–≤—Ä–∞—Ç HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–ª–∏ JSON-–¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç—É

## –ü—Ä–æ—Ç–æ–∫–æ–ª –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

    –ö–ª–∏–µ–Ω—Ç—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —Å —Å–µ—Ä–≤–µ—Ä–æ–º —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã

    –î–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä

    –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è REST-–∫–ª–∏–µ–Ω—Ç

    –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ application/x-www-form-urlencoded –¥–ª—è —Ñ–æ—Ä–º –∏ JSON –¥–ª—è API


### –°–µ—Ä–≤–µ—Ä

```python
import socket
import threading
from urllib.parse import parse_qs
import html
from datetime import datetime


class SimpleHTTPServer:
    def __init__(self, host='localhost', port=8080):
        self.host = host
        self.port = port
        self.grades = {}  # {discipline: [grade1, grade2, ...]}
        self.server_socket = None

    def parse_request(self, request_data):
        """–ü–∞—Ä—Å–∏—Ç HTTP –∑–∞–ø—Ä–æ—Å"""
        lines = request_data.split('\r\n')
        if not lines:
            return None, None, {}

        # –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ - –º–µ—Ç–æ–¥ –∏ –ø—É—Ç—å
        first_line = lines[0].split()
        if len(first_line) < 2:
            return None, None, {}

        method = first_line[0]
        path = first_line[1]

        # –ü–∞—Ä—Å–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
        params = {}
        if method == 'GET' and '?' in path:
            path, query_string = path.split('?', 1)
            params = parse_qs(query_string)
            # –£–±–∏—Ä–∞–µ–º —Å–ø–∏—Å–∫–∏ –∏–∑ –∑–Ω–∞—á–µ–Ω–∏–π
            params = {k: v[0] for k, v in params.items()}
        elif method == 'POST':
            # –ò—â–µ–º —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞
            body_start = request_data.find('\r\n\r\n') + 4
            if body_start > 3:
                body = request_data[body_start:]
                params = parse_qs(body)
                params = {k: v[0] for k, v in params.items()}

        return method, path, params

    def add_grade(self, discipline, grade):
        """–î–æ–±–∞–≤–ª—è–µ—Ç –æ—Ü–µ–Ω–∫—É –ø–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–µ"""
        discipline = html.escape(discipline.strip())
        try:
            grade = int(grade)
            if grade < 1 or grade > 5:
                return False, "–û—Ü–µ–Ω–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 1 –¥–æ 5"
        except ValueError:
            return False, "–û—Ü–µ–Ω–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —á–∏—Å–ª–æ–º"

        if discipline not in self.grades:
            self.grades[discipline] = []

        self.grades[discipline].append(grade)
        return True, "–û—Ü–µ–Ω–∫–∞ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞"

    def generate_html(self, message=""):
        """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç HTML —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –æ—Ü–µ–Ω–∫–∞–º–∏"""
        html_content = f"""
        <!DOCTYPE html>
        <html lang="ru">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>–°–∏—Å—Ç–µ–º–∞ —É—á–µ—Ç–∞ –æ—Ü–µ–Ω–æ–∫</title>
            <style>
                body {{
                    font-family: Arial, sans-serif;
                    max-width: 800px;
                    margin: 0 auto;
                    padding: 20px;
                    background-color: #f5f5f5;
                }}
                .container {{
                    background: white;
                    padding: 30px;
                    border-radius: 10px;
                    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                }}
                h1 {{
                    color: #333;
                    text-align: center;
                    border-bottom: 2px solid #4CAF50;
                    padding-bottom: 10px;
                }}
                .form-group {{
                    margin-bottom: 20px;
                }}
                label {{
                    display: block;
                    margin-bottom: 5px;
                    font-weight: bold;
                    color: #555;
                }}
                input[type="text"], input[type="number"] {{
                    width: 100%;
                    padding: 10px;
                    border: 1px solid #ddd;
                    border-radius: 5px;
                    font-size: 16px;
                    box-sizing: border-box;
                }}
                button {{
                    background: #4CAF50;
                    color: white;
                    padding: 12px 24px;
                    border: none;
                    border-radius: 5px;
                    cursor: pointer;
                    font-size: 16px;
                    width: 100%;
                }}
                button:hover {{
                    background: #45a049;
                }}
                .message {{
                    padding: 10px;
                    margin: 10px 0;
                    border-radius: 5px;
                    text-align: center;
                }}
                .success {{
                    background: #d4edda;
                    color: #155724;
                    border: 1px solid #c3e6cb;
                }}
                .error {{
                    background: #f8d7da;
                    color: #721c24;
                    border: 1px solid #f5c6cb;
                }}
                .grades-table {{
                    width: 100%;
                    border-collapse: collapse;
                    margin-top: 20px;
                }}
                .grades-table th, .grades-table td {{
                    border: 1px solid #ddd;
                    padding: 12px;
                    text-align: left;
                }}
                .grades-table th {{
                    background: #f8f9fa;
                    font-weight: bold;
                }}
                .grades-table tr:nth-child(even) {{
                    background: #f2f2f2;
                }}
                .no-data {{
                    text-align: center;
                    color: #666;
                    font-style: italic;
                    padding: 20px;
                }}
                .stats {{
                    background: #e7f3ff;
                    padding: 15px;
                    border-radius: 5px;
                    margin: 15px 0;
                }}
            </style>
        </head>
        <body>
            <div class="container">
                <h1>üìä –°–∏—Å—Ç–µ–º–∞ —É—á–µ—Ç–∞ –æ—Ü–µ–Ω–æ–∫</h1>

                <div class="stats">
                    <strong>–í—Å–µ–≥–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω:</strong> {len(self.grades)} | 
                    <strong>–í—Å–µ–≥–æ –æ—Ü–µ–Ω–æ–∫:</strong> {sum(len(grades) for grades in self.grades.values())}
                </div>

                <h2>üìù –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –æ—Ü–µ–Ω–∫—É</h2>
                <form method="POST" action="/add">
                    <div class="form-group">
                        <label for="discipline">–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞:</label>
                        <input type="text" id="discipline" name="discipline" required 
                               placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã">
                    </div>

                    <div class="form-group">
                        <label for="grade">–û—Ü–µ–Ω–∫–∞ (1-5):</label>
                        <input type="number" id="grade" name="grade" min="1" max="5" required 
                               placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ü–µ–Ω–∫—É –æ—Ç 1 –¥–æ 5">
                    </div>

                    <button type="submit">‚úÖ –î–æ–±–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫—É</button>
                </form>
        """

        # –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ, –µ—Å–ª–∏ –µ—Å—Ç—å
        if message:
            msg_class = "success" if "—É—Å–ø–µ—à–Ω–æ" in message else "error"
            html_content += f'<div class="message {msg_class}">{message}</div>'

        # –î–æ–±–∞–≤–ª—è–µ–º —Ç–∞–±–ª–∏—Ü—É —Å –æ—Ü–µ–Ω–∫–∞–º–∏
        html_content += """
                <h2>üìà –í—Å–µ –æ—Ü–µ–Ω–∫–∏</h2>
        """

        if self.grades:
            html_content += """
                <table class="grades-table">
                    <thead>
                        <tr>
                            <th>–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞</th>
                            <th>–û—Ü–µ–Ω–∫–∏</th>
                            <th>–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª</th>
                            <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                        </tr>
                    </thead>
                    <tbody>
            """

            for discipline, grades in sorted(self.grades.items()):
                avg_grade = sum(grades) / len(grades)
                grades_str = ", ".join(map(str, grades))

                html_content += f"""
                        <tr>
                            <td><strong>{discipline}</strong></td>
                            <td>{grades_str}</td>
                            <td>{avg_grade:.2f}</td>
                            <td>{len(grades)}</td>
                        </tr>
                """

            html_content += """
                    </tbody>
                </table>
            """
        else:
            html_content += """
                <div class="no-data">
                    üìù –û—Ü–µ–Ω–∫–∏ –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é –æ—Ü–µ–Ω–∫—É –∏—Å–ø–æ–ª—å–∑—É—è —Ñ–æ—Ä–º—É –≤—ã—à–µ.
                </div>
            """

        # –§—É—Ç–µ—Ä
        html_content += f"""
                <div style="margin-top: 30px; text-align: center; color: #666; font-size: 12px;">
                    –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}
                </div>
            </div>
        </body>
        </html>
        """

        return html_content

    def create_response(self, status_code, content, content_type="text/html; charset=utf-8"):
        """–°–æ–∑–¥–∞–µ—Ç HTTP –æ—Ç–≤–µ—Ç"""
        status_messages = {
            200: "OK",
            201: "Created",
            400: "Bad Request",
            404: "Not Found",
            405: "Method Not Allowed"
        }

        response = [
            f"HTTP/1.1 {status_code} {status_messages.get(status_code, 'Unknown')}",
            f"Content-Type: {content_type}",
            f"Content-Length: {len(content.encode('utf-8'))}",
            "Connection: close",
            f"Date: {datetime.now().strftime('%a, %d %b %Y %H:%M:%S GMT')}",
            "Server: SimpleGradesServer/1.0",
            "",  # –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ —Ä–∞–∑–¥–µ–ª—è–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ —Ç–µ–ª–æ
            content
        ]

        return "\r\n".join(response)

    def handle_request(self, client_socket, client_address):
        """–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç HTTP –∑–∞–ø—Ä–æ—Å"""
        try:
            # –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞
            request_data = client_socket.recv(4096).decode('utf-8')
            if not request_data:
                return

            print(f"–ó–∞–ø—Ä–æ—Å –æ—Ç {client_address}:")
            print(request_data.split('\r\n')[0])  # –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
            print()

            # –ü–∞—Ä—Å–∏–º –∑–∞–ø—Ä–æ—Å
            method, path, params = self.parse_request(request_data)

            # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –º–∞—Ä—à—Ä—É—Ç—ã
            if path == '/' or path == '/grades':
                # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –æ—Ü–µ–Ω–∫–∞–º–∏
                html_content = self.generate_html()
                response = self.create_response(200, html_content)

            elif path == '/add' and method == 'POST':
                # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –æ—Ü–µ–Ω–∫–∏
                discipline = params.get('discipline', '')
                grade = params.get('grade', '')

                if discipline and grade:
                    success, message = self.add_grade(discipline, grade)
                    html_content = self.generate_html(message)
                    response = self.create_response(201, html_content)
                else:
                    html_content = self.generate_html("–û—à–∏–±–∫–∞: –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è")
                    response = self.create_response(400, html_content)

            elif path == '/add' and method == 'GET':
                # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
                html_content = self.generate_html()
                response = self.create_response(200, html_content)

            elif path == '/api/grades':
                # JSON API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ü–µ–Ω–æ–∫
                import json
                json_data = json.dumps(self.grades, ensure_ascii=False)
                response = self.create_response(200, json_data, "application/json; charset=utf-8")

            else:
                # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
                error_html = """
                <!DOCTYPE html>
                <html>
                <head><title>404 Not Found</title></head>
                <body>
                    <h1>404 - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</h1>
                    <p>–ó–∞–ø—Ä–æ—à–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç</p>
                    <p><a href="/">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a></p>
                </body>
                </html>
                """
                response = self.create_response(404, error_html)

            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
            client_socket.send(response.encode('utf-8'))
            print(f"–û—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω: {response.split('\r\n')[0]}")

        except Exception as e:
            print(f"–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –æ—Ç {client_address}: {e}")
            error_response = self.create_response(500, "Internal Server Error")
            client_socket.send(error_response.encode('utf-8'))
        finally:
            client_socket.close()

    def start(self):
        """–ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä"""
        self.server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.server_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)

        try:
            self.server_socket.bind((self.host, self.port))
            self.server_socket.listen(5)

            print("=" * 60)
            print("üéì –°–ï–†–í–ï–† –£–ß–ï–¢–ê –û–¶–ï–ù–û–ö –ó–ê–ü–£–©–ï–ù")
            print("=" * 60)
            print(f"–°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://{self.host}:{self.port}")
            print("–î–æ—Å—Ç—É–ø–Ω—ã–µ endpoints:")
            print("  GET  /          - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –æ—Ü–µ–Ω–∫–∞–º–∏")
            print("  POST /add       - –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –æ—Ü–µ–Ω–∫—É")
            print("  GET  /api/grades - JSON API —Å–æ –≤—Å–µ–º–∏ –æ—Ü–µ–Ω–∫–∞–º–∏")
            print("\n–î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞–∂–º–∏—Ç–µ Ctrl+C")
            print("=" * 60)

            while True:
                try:
                    client_socket, client_address = self.server_socket.accept()

                    # –ó–∞–ø—É—Å–∫–∞–µ–º –ø–æ—Ç–æ–∫ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞
                    client_thread = threading.Thread(
                        target=self.handle_request,
                        args=(client_socket, client_address),
                        daemon=True
                    )
                    client_thread.start()

                    print(f"–ù–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: {client_address}")

                except KeyboardInterrupt:
                    break
                except Exception as e:
                    print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–∏–Ω—è—Ç–∏–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: {e}")

        except KeyboardInterrupt:
            print("\n–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞...")
        except Exception as e:
            print(f"–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: {e}")
        finally:
            if self.server_socket:
                self.server_socket.close()
            print("–°–µ—Ä–≤–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")


if __name__ == "__main__":
    server = SimpleHTTPServer()
    server.start()
```

### Test –§–∞–π–ª –¥–ª—è POST –∑–∞–ø—Ä–æ—Å–æ–≤

```python
import requests
import json


def test_server():
    base_url = "http://localhost:8080"

    print("–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ –æ—Ü–µ–Ω–æ–∫...")

    try:
        # –¢–µ—Å—Ç –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        response = requests.get(f"{base_url}/")
        print(f"GET / - Status: {response.status_code}")

        # –¢–µ—Å—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ—Ü–µ–Ω–æ–∫
        test_grades = [
            {"discipline": "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞", "grade": "5"},
            {"discipline": "–§–∏–∑–∏–∫–∞", "grade": "4"},
            {"discipline": "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ", "grade": "5"},
            {"discipline": "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞", "grade": "4"},
        ]

        for grade in test_grades:
            response = requests.post(f"{base_url}/add", data=grade)
            print(f"POST /add {grade} - Status: {response.status_code}")

        # –¢–µ—Å—Ç JSON API
        response = requests.get(f"{base_url}/api/grades")
        print(f"GET /api/grades - Status: {response.status_code}")
        grades_data = response.json()
        print("–î–∞–Ω–Ω—ã–µ –æ—Ü–µ–Ω–æ–∫:", json.dumps(grades_data, ensure_ascii=False, indent=2))

    except requests.ConnectionError:
        print("–û—à–∏–±–∫–∞: –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω.")
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: {e}")


if __name__ == "__main__":
    test_server()
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç
–ú–æ–∂–Ω–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å —Å cURL –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —ç—Ç–æ WPS —Ç–∞–∫ —á—Ç–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã cURL –±—É–¥—É—Ç –∞–ª–∏–∞—Å–∞–º–∏(–ø—Å–µ–≤–¥–æ–Ω–∏–º–∞–º–∏)
![task5server.png](assets/curl.png)
–ü–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ GET-–∑–∞–ø—Ä–æ—Å–æ–≤ –±—ã–ª –∑–∞–ø—É—â–µ–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω–∏–ª —Å–µ—Ä–∏—é POST-–∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ—Ü–µ–Ω–æ–∫ –≤ —Å–∏—Å—Ç–µ–º—É. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏–ª–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å–µ—Ä–≤–µ—Ä–∞ –∫–∞–∫ —Å –ø—É—Å—Ç–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö, —Ç–∞–∫ –∏ —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

![task5server.png](assets/task5server.png)

–ü—Ä–∏ –∑–∞—Ö–æ–¥–µ –≤ –±—Ä–∞—É–∑–µ—Ä –ø–æ –∞–¥—Ä–µ—Å—É —Å–µ—Ä–≤–µ—Ä–∞ (http://localhost:8080/) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç HTML‚Äë—Å—Ç—Ä–∞–Ω–∏—Ü—É —Å —Ç–µ–∫—É—â–∏–º–∏ –æ—Ü–µ–Ω–∫–∞–º–∏:

![task5get.png](assets/task5get.png)


## –í—ã–≤–æ–¥

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø—Ä–æ—Å—Ç–æ–π –≤–µ–±‚Äë—Å–µ—Ä–≤–µ—Ä –Ω–∞ Python, –∫–æ—Ç–æ—Ä—ã–π —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø–∞—Ä—Å–∏—Ç –∑–∞–ø—Ä–æ—Å –∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –µ–≥–æ —Ç–∏–ø–∞ –æ—Ç–¥–∞–µ—Ç –Ω—É–∂–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏.